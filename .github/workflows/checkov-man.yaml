name: 'checkov man'
on:
  workflow_dispatch:
env:
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # An automatically generated secret provided by GitHub for use in GitHub Actions.
jobs:
  terraform-fmt-validate:
    name: 'Terraform FMT & Validate'
    runs-on: ubuntu-latest
    steps:
    - name: Checkout the repository
      uses: actions/checkout@v3
      with:
        ref: main
    - name: Install
      run: |
        sudo pip install checkov
    - name: Setup Terraform on the runner
      uses: hashicorp/setup-terraform@v2.0.3
    - name: Terraform init, fmt, & validate - module
      run: |
        checkov --file ./main.tf